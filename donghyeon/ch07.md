# ch07. 객체지향 프로그래밍 Ⅱ

## 상속
상속은 멤버(변수, 메서드)만 상속된다. 생성자, 초기화 블럭은 상속되지 않는다. 보통 `is-a` 관계면 상속을, `has-a` 관계면 구성(Composition)으로 관계를 맺는다. 다만 이는 절대적인 것이 아니므로 참고정도로만 사용한다.  

상속 관계 사용시 주의할 점은 조상의 멤버 변수는 조상의 생성자에 의해 초기화해야 한다는 것이다. 

### 오버라이딩
상복 받은 **메서드의 내용**을 변경하는 것을 오버라이딩(overriding)이라 한다. 메서드의 내용을 변경하는 것이므로 메서드의 시그니처와 반환 타입은 같아야 한다.  
JDK 1.5부터 `공변 반환타입`이 추가되어 반환타입을 자손 클래스의 타입으로 변경하는 것은 가능해졌다.  

접근 제어자는 조상 클래스보다 더 넓게, 예외는 조상 클래스보다 더 적게 변경할 수 있다.  

인스턴스 메서드를 static 메서드로 또는 그 반대로 변경할 수도 없다.  

## 다형성
조상 클래스 타입의 참조변수로 자손 클래스의 인스턴스를 참조하는 것이다. 반대의 경우는 불가능하다.  

모든 참조변수는 null 또는 4 byte의 주소 값이 저장되며, 참조변수의 타입은 참조할 수 있는 객체의 종류와 사용가능한 멤버의 수를 결정한다.  

참조변수의 형변환은 참조변수의 타입을 변환하는 것이지 인스턴스를 변환하는 것이 아니다. 단지 인스턴스에서 사용할 수 있는 멤버의 수를 조절하는 것이다.  

```java
FireCar fireCar = (FireCar)new Car();
```

위의 코드는 `ClassCastException`이 발생한다. Car 타입의 인스턴스를 자손타입의 참조변수로 참조하는 것은 허용되지 않기 때문이다.

`instanceof`의 결과가 `true`이면 형변환이 가능하므로 `instanceof` 연산을 먼저 수행한 뒤 형변환 하는 것이 안전하다.  

## 추상 클래스
하나 이상의 추상 메서드를 갖는 클래스이다. 추상 메서드란 선언부만 갖고 있는 메서드이다. 추상 클래스를 상속한 자식 클래스는 그 자신도 추상 클래스가 아니면 추상 메서드를 구현해야 한다. 

## 인터페이스
- 추상 클래스보다 추상화가 높다.
- 인터페이스는 다중 상속이 가능하다.
- 인터페이스는 Object 클래스를 상속하지 않는다.
- 인터페이스의 멤버 변수는 모두 `public static final`로만 지정 가능하며 이는 생략 가능하다.
	- 인터페이스는 상태가 없다.
- 인터페이스의 메서드는 기본적으로 `public abstract`이며 이는 생략 가능하다.
- JDK 8부터 `default` 키워드를 이용해 일반적인 메서드를 만들 수 있으며 오버라이딩이 가능하다.
	- `defualt` 메서드는 `public`만 가능하며 이는 생략 가능하다.
- JDK 8부터 `static` 메서드를 만들 수 있다.
- JDK 9부터 `private` 메서드를 만들 수 있다.

## 내부 클래스
클래스 내에 선언된 클래스로 서로 긴밀한 관계의 두 클래스를 정의해 각 클래스의 멤버에 쉽게 접근이 가능하고 외부에 불필요한 클래스 노출을 줄일 수 있다. 

| 내부 클래스                          | 위치                                    | 특징                                                           |
| ------------------------------------ | --------------------------------------- | -------------------------------------------------------------- |
| 인스턴스 클래스<br/>(instance class) | 외부 클래스의 멤버변수 선언위치         | 외부 클래스의 인스턴스 멤버들과 관련된 작업에 사용.            |
| 스태틱 클래스<br/>(static class)     | 외부 클래스의 멤버변수 선언위치         | 외부 클래스의 static 멤버, 특히 static 메서드에서 사용.        |
| 지역 클래스<br/>(local class)        | 외부 클래스의 메서드나 초기화 블럭 내부 | 선언된 영역의 내부에서만 사용 가능                             |
| 익명 클래스<br/>(anonymous class)    |                                         | 클래스의 선언과 객체 생성을 동시에 하는 이름없는 일회용 클래스 |



# ch15. 입출력(I/O)

- 입출력: 컴퓨터 내부 또는 외부의 장치와 프로그램간의 데이터를 주고받는 것
- 스트림(stream): 연속적인 데이터 흐름. 데이터를 운반하는데 사용되는 연결통로
  - 스트림은 단방향통신만 가능 -> 하나의 스트림은 입력과 출력을 동시에 처리할 수 없음
  - FIFO 구조로 동작하며 중간에 건너뛰지 않음
  - 바이트 단위로 데이터를 전송
- 보조 스트림: 데이터 I/O 기능은 없지만, 스트림의 기능을 향상시키기 위해 사용
  - 스트림을 먼저 생성 후 이를 기반으로 보조 스트림 생성
  - BuffredXXStream, DataXXStream, SequenceInputStream, ObjectXXStream 등
- 문자기반 스트림(Reader, Writer)
  - char형이 2 byte이기 때문에 입출력 단위가 1 byte인 스트림으로 문자를 처리하는데 어려움이 있음
  - 이를 보완하기 위해 나온 것이 문자기반 스트림
  - 문자데이터를 I/O하기 위해서는 문자기반 스트림을 사용하는 것이 효율적
  - XXInputStream -> XXReader
  - XXOutputStream -> XXWriter
- 표준입출력(Standard I/O)
  - 표준입출력: 콘솔을 통한 데이터 입력과 콘솔로의 데이터 출력
  - 자바에서는 `System.in`, `System.out`, `System.err` 을 제공
  - `Systeam.setIn()`, `System.setOut()`, ``Systeam.setErr()`을 통해 표준입출력 대상 변경 가능
- RandomAccessFile
  - 일반적으로는 입력과 출력이 각각 분리되어 별도의 작업을 함
  - `RandomAccessFile`은 하나의 클래스로 파일에 대한 I/O를 모두 할 수 있음
  - 파일의 어느 위치에나 읽기/쓰기가 가능
- 직렬화(Serialization)
  - 객체를 데이터 스트림으로 만드는 것
  - 반대는 역직렬화(Deserialization, 스트림으로부터 데이터를 읽어 객체를 만드는 것)
  - ObjectInputStream/ObjectOutputStream으로 객체를 직렬화/역직렬화 할 수 있음
  - 역직렬화할 때는 직렬화 순서와 동일하게 역직렬화해야 함
    - 그래서 주로 컬렉션에 저장해서 직렬화. (컬렉션만 역직렬화하면 되기 때문)
  - serialVersionUID
    - 호환성 유지: 클래스가 수저되어도 이전에 직렬화된 객체를 역직렬화할 수 있게 함
    - 버전 관리: 클래스의 버전을 명시적으로 관리
- 직렬화 가능 클래스를 만드는 방법
  - Serializable 인터페이스 구현
    - 조상 클래스가 `Serializable`를 구현하지 않았다면 조상 클래스의 멤버는 직렬화 대상에서 제외
    - `Serializable`를 구현하지 않은 클래스를 멤버로 갖고 있다면 직렬화할 때 `java.io.NotSerializableException` 예외가 발생
    - 단, 변수의 타입이 아닌 실제로 연결된 객체의 종류에 의해 결정됨
    - `Object o = new Object();`는 직렬화에 실패하지만 `Object o = new String("abc");`는 직렬화에 성공
  - transient
    - 직렬화 대상에서 제외하고 싶은 경우 `transient` 제어자 사용
